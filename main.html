<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ì–æ—Ä–æ–¥—Å–∫–∞—è –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ ‚Ññ26</title>
  <style>
    /* –í—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
    body {
      margin: 0;
      font-family: "Segoe UI", sans-serif;
      background: linear-gradient(to right, #e0f7fa, #b2ebf2);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding: 40px;
    }

    .page {
      display: flex;
      flex-direction: column;
      width: 1200px;
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    .header {
      background-color: #00796b;
      color: white;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: bold;
      font-size: 18px;
    }

    .nav {
      display: flex;
      gap: 30px;
    }

    .nav a {
      color: white;
      text-decoration: none;
      transition: color 0.3s;
    }

    .nav a:hover {
      color: #b2dfdb;
    }

    .login-button {
      background-color: white;
      color: #00796b;
      padding: 8px 16px;
      border-radius: 20px;
      text-decoration: none;
      font-weight: bold;
      transition: background-color 0.3s;
    }

    .login-button:hover {
      background-color: #e0f2f1;
    }

    .content {
      display: flex;
      padding: 30px;
      gap: 30px;
    }

    .photo {
      width: 400px;
      height: 250px;
      border-radius: 8px;
      background-color: #e0f2f1;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #00796b;
      font-weight: bold;
    }

    .info {
      flex-grow: 1;
    }

    .info h2 {
      color: #00796b;
      margin-bottom: 10px;
    }

    .services ul {
      list-style: none;
      padding: 0;
    }

    .services li {
      padding: 8px 0;
      border-bottom: 1px solid #eee;
      cursor: pointer;
      transition: color 0.3s;
    }

    .services li:hover {
      color: #00796b;
    }

    .section {
      padding: 30px;
      border-top: 1px solid #eee;
    }

    .section h3 {
      color: #00796b;
      margin-bottom: 20px;
    }

    .section p {
      margin: 8px 0;
      color: #333;
    }

    .news-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 15px;
      margin-top: 15px;
    }

    .news-card {
      background: white;
      border: 2px solid #00796b;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      min-height: 120px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.3s, box-shadow 0.3s;
      cursor: pointer;
    }

    .news-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,121,107,0.3);
    }

    .news-date {
      font-size: 14px;
      font-weight: bold;
      color: #00796b;
      margin-bottom: 8px;
    }

    .news-title {
      font-size: 14px;
      font-weight: 500;
      color: #333;
      line-height: 1.3;
    }

    .loading {
      text-align: center;
      padding: 20px;
      color: #666;
    }

    .spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #00796b;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 0 auto 10px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .debug-info {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      border-radius: 4px;
      padding: 10px;
      margin: 10px 0;
      font-size: 12px;
      color: #856404;
    }

    .map iframe {
      width: 100%;
      height: 300px;
      border: 0;
      border-radius: 8px;
    }

    .footer {
      display: flex;
      justify-content: space-between;
      background-color: #e0f2f1;
      padding: 30px;
      font-size: 14px;
      color: #004d40;
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="header">
      <div class="nav">
        <a href="main.html">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="information.html">–û–± —É—á—Ä–µ–∂–¥–µ–Ω–∏–∏</a>
        <a href="raspisanie.html">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</a>
        <a href="doing.html">–î–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å</a>
        <a href="platuslugi.html">–ü–ª–∞—Ç–Ω—ã–µ —É—Å–ª—É–≥–∏</a>
        <a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
      </div>
      <a href="page1.html" class="login-button">–í—Ö–æ–¥</a>
    </div>

    <div class="content">
      <div class="photo">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∏</div>
      <div class="info">
        <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤</h2>
        <div class="services">
          <ul>
            <li onclick="showService('online')">–ó–∞–∫–∞–∑ —Ç–∞–ª–æ–Ω–∞ –æ–Ω–ª–∞–π–Ω</li>
            <li onclick="showService('home')">–í—ã–∑–æ–≤ –≤—Ä–∞—á–∞ –Ω–∞ –¥–æ–º</li>
            <li onclick="showService('admin')">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è</li>
            <li onclick="showService('doctors')">–°–ø–∏—Å–æ–∫ –≤—Ä–∞—á–µ–π</li>
            <li onclick="showService('appointments')">–°–ø–∏—Å–æ–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø—Ä–∏—ë–º–æ–≤</li>
            <li onclick="showService('card')">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞</li>
            <li onclick="showService('vaccine')">–ó–∞–ø–∏—Å—å –Ω–∞ –≤–∞–∫—Ü–∏–Ω–∞—Ü–∏—é</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π -->
    <div class="section">
      <h3>–ù–æ–≤–æ—Å—Ç–∏ —É—á—Ä–µ–∂–¥–µ–Ω–∏—è</h3>
      <div id="debug-info" class="debug-info" style="display: none;"></div>
      <div id="news-container">
        <div class="loading">
          <div class="spinner"></div>
          <p>–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...</p>
        </div>
      </div>
    </div>

    <div class="section">
      <h3>–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã</h3>
      <p>–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ ‚Äì –ü—è—Ç–Ω–∏—Ü–∞: 08:00 ‚Äì 20:00</p>
      <p>–°—É–±–±–æ—Ç–∞: 09:00 ‚Äì 15:00</p>
      <p>–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ: –≤—ã—Ö–æ–¥–Ω–æ–π</p>
    </div>

    <div class="section">
      <h3>–ö–∞–∫ –Ω–∞—Å –Ω–∞–π—Ç–∏</h3>
      <div class="map">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2430.123456789!2d27.512345!3d53.912345!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x46dbcf123456789%3A0xabcdef123456789!2s%D1%83%D0%BB.%20%D0%9A%D0%BE%D0%BB%D0%B5%D1%81%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2%D0%B0%203%2C%20%D0%9C%D0%B8%D0%BD%D1%81%D0%BA!5e0!3m2!1sru!2sby!4v1699999999999"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </div>

    <div class="footer">
      <div>
        <strong>–°–ø—Ä–∞–≤–æ—á–Ω–∞—è:</strong><br>
        –∑–∞–ø–∏—Å—å –∫ –≤—Ä–∞—á—É: +375-25-751-77-10<br>
        —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞: +375-44-512-22-79
      </div>
      <div>
        <strong>–ê–¥—Ä–µ—Å:</strong><br>
        –≥. –ú–∏–Ω—Å–∫, —É–ª. –ö–æ–ª–µ—Å–Ω–∏–∫–æ–≤–∞ 3<br>
        –ø–æ—á—Ç–∞: info26@gmail.com
      </div>
    </div>
  </div>

  <script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
    function showDebugInfo(message, type = 'info') {
      const debugDiv = document.getElementById('debug-info');
      debugDiv.innerHTML = `<strong>${type.toUpperCase()}:</strong> ${message}`;
      debugDiv.style.display = 'block';
      debugDiv.style.background = type === 'error' ? '#f8d7da' : '#fff3cd';
      debugDiv.style.borderColor = type === 'error' ? '#f5c6cb' : '#ffeaa7';
      debugDiv.style.color = type === 'error' ? '#721c24' : '#856404';
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API
    async function testApiConnection() {
      try {
        showDebugInfo('–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É...');
        const response = await fetch('/api/test-news');
        const data = await response.json();
        
        if (data.success) {
          showDebugInfo(`‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —É—Å–ø–µ—à–Ω–æ. –ù–∞–π–¥–µ–Ω–æ ${data.total} –Ω–æ–≤–æ—Å—Ç–µ–π`, 'success');
          console.log('üìä –ù–æ–≤–æ—Å—Ç–∏ –∏–∑ –ë–î:', data.news);
          return true;
        } else {
          showDebugInfo(`‚ùå –û—à–∏–±–∫–∞ –ë–î: ${data.error}`, 'error');
          return false;
        }
      } catch (error) {
        showDebugInfo(`‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ${error.message}`, 'error');
        return false;
      }
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ –ë–î
    async function loadNewsFromDB() {
      showDebugInfo('–ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...');
      
      try {
        console.log('üîÑ –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...');
        const response = await fetch('/api/news');
        
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const data = await response.json();
        console.log('üì• –û—Ç–≤–µ—Ç –æ—Ç API:', data);
        
        if (data.success && data.news && data.news.length > 0) {
          showDebugInfo(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${data.news.length} –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ –ë–î`, 'success');
          console.log(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${data.news.length} –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ –ë–î:`, data.news);
          displayNewsFromDB(data.news);
        } else {
          throw new Error(data.error || '–ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö');
        }
      } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ –ë–î:', error);
        showDebugInfo(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
        showBackupNews();
      }
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ –ë–î –≤ –∫–≤–∞–¥—Ä–∞—Ç–∏–∫–∞—Ö
    function displayNewsFromDB(news) {
      const container = document.getElementById('news-container');
      
      container.innerHTML = `
        <div class="news-grid">
          ${news.map(item => `
            <div class="news-card" onclick="showNewsDetail(${item.id})">
              <div class="news-date">${escapeHtml(item.date)}</div>
              <div class="news-title">${escapeHtml(item.short_description || item.title)}</div>
              <small style="color: #666; font-size: 10px;">ID: ${item.id}</small>
            </div>
          `).join('')}
        </div>
      `;
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
    function showBackupNews() {
      const container = document.getElementById('news-container');
      
      const backupNews = [
        { id: 1, date: '01 –æ–∫—Ç—è–±—Ä—è 2025', title: '–û—Ç–∫—Ä—ã—Ç –Ω–æ–≤—ã–π –∫–∞–±–∏–Ω–µ—Ç –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∞', short_description: '–û—Ç–∫—Ä—ã—Ç –Ω–æ–≤—ã–π –∫–∞–±–∏–Ω–µ—Ç –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∞.' },
        { id: 2, date: '05 –æ–∫—Ç—è–±—Ä—è 2025', title: '–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤–∞–∫—Ü–∏–Ω–∞—Ü–∏—è –ø—Ä–æ—Ç–∏–≤ –≥—Ä–∏–ø–ø–∞', short_description: '–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤–∞–∫—Ü–∏–Ω–∞—Ü–∏—è –ø—Ä–æ—Ç–∏–≤ –≥—Ä–∏–ø–ø–∞.' },
        { id: 3, date: '07 –æ–∫—Ç—è–±—Ä—è 2025', title: '–ò–∑–º–µ–Ω–µ–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏—ë–º–∞ —Ç–µ—Ä–∞–ø–µ–≤—Ç–æ–≤', short_description: '–ò–∑–º–µ–Ω–µ–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏—ë–º–∞ —Ç–µ—Ä–∞–ø–µ–≤—Ç–æ–≤.' },
        { id: 4, date: '10 –æ–∫—Ç—è–±—Ä—è 2025', title: '–ü—Ä–∏—ë–º –Ω–æ–≤–æ–≥–æ —ç–Ω–¥–æ–∫—Ä–∏–Ω–æ–ª–æ–≥–∞', short_description: '–ü—Ä–∏—ë–º –Ω–æ–≤–æ–≥–æ —ç–Ω–¥–æ–∫—Ä–∏–Ω–æ–ª–æ–≥–∞.' },
        { id: 5, date: '15 –æ–∫—Ç—è–±—Ä—è 2025', title: '–ù–µ–¥–µ–ª—è –¥–∏–∞–±–µ—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏', short_description: '–ù–µ–¥–µ–ª—è –¥–∏–∞–±–µ—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏.' }
      ];
      
      showDebugInfo('‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ (–ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞)', 'warning');
      displayNewsFromDB(backupNews);
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –¥–µ—Ç–∞–ª–µ–π –Ω–æ–≤–æ—Å—Ç–∏
    function showNewsDetail(newsId) {
      alert(`–ù–æ–≤–æ—Å—Ç—å ID: ${newsId}\n\n–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.`);
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è HTML
    function escapeHtml(text) {
      if (!text) return '';
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–æ–≤ –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º
    function showService(service) {
      const services = {
        'online': '–ó–∞–∫–∞–∑ —Ç–∞–ª–æ–Ω–∞ –æ–Ω–ª–∞–π–Ω - —Ñ—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ',
        'home': '–í—ã–∑–æ–≤ –≤—Ä–∞—á–∞ –Ω–∞ –¥–æ–º - —Ñ—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ',
        'admin': '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è - —Ñ—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ',
        'doctors': '–°–ø–∏—Å–æ–∫ –≤—Ä–∞—á–µ–π - —Ñ—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ',
        'appointments': '–°–ø–∏—Å–æ–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø—Ä–∏—ë–º–æ–≤ - —Ñ—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ',
        'card': '–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞ - —Ñ—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ',
        'vaccine': '–ó–∞–ø–∏—Å—å –Ω–∞ –≤–∞–∫—Ü–∏–Ω–∞—Ü–∏—é - —Ñ—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ'
      };
      
      alert(services[service] || '–°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
    }

    // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    async function initializePage() {
      console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã...');
      
      // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ API
      const isConnected = await testApiConnection();
      
      if (isConnected) {
        // –ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –µ—Å—Ç—å, –∑–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ –ë–î
        await loadNewsFromDB();
      } else {
        // –ï—Å–ª–∏ –Ω–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
        showBackupNews();
      }
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', initializePage);
  </script>
</body>
</html>